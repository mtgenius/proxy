(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,n){(function(e){var r,a,o,c,i=n(8);window,c=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==i(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)})(e)}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p=n(1),h=n(2).default,b=Object.create(null),y=function(e){h.removeListeners(e)},m=function(e){return Object.assign(h.state(e),b)},v=function(e,t,n){var r=h.setAny(e);"function"==typeof t&&(r instanceof Promise?r.then(function(){t(n.global)}):t(n.global))},O=function(e){return function(t){function n(){var e,t;o(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];t=l(this,(e=s(n)).call.apply(e,[this].concat(a)));var i=Object.getPrototypeOf(d(d(t))),u=Object.prototype.hasOwnProperty.call(d(d(t)),"componentWillUnmount"),f=Object.prototype.hasOwnProperty.call(i,"componentWillUnmount");if(u||f){var p=u?t.componentWillUnmount:i.componentWillUnmount.bind(d(d(t)));t.componentWillUnmount=function(){y(d(d(t))),p.apply(void 0,arguments)}}return t}return f(n,e),u(n,[{key:"componentWillUnmount",value:function(){y(this)}},{key:"setGlobal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(e,t,this)}},{key:"global",get:function(){return m(this)}}]),n}()},j=function(e){var t=function(t){function n(){var e;o(this,n);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return l(this,(e=s(n)).call.apply(e,[this].concat(r)))}return f(n,e),u(n,[{key:"componentWillUnmount",value:function(){if(y(this),a(s(n.prototype),"componentWillUnmount",this)){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];(e=a(s(n.prototype),"componentWillUnmount",this)).call.apply(e,[this].concat(r))}}},{key:"setGlobal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(e,t,this)}},{key:"global",get:function(){return m(this)}}]),n}();return Object.prototype.hasOwnProperty.call(e,"getDerivedGlobalFromProps")&&(t.getDerivedStateFromProps=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var o=e.getDerivedGlobalFromProps.apply(e,[t,h._state].concat(r));return h.setAny(o),Object.prototype.hasOwnProperty.call(e,"getDerivedStateFromProps")?e.getDerivedStateFromProps.apply(e,[t].concat(r)):null}),t.displayName=(e.displayName||e.name)+"-ReactN",t};Object.assign(j,p,{addReducer:function(e,t){b[e]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];h.setAny(t.apply(void 0,[h._state].concat(n)))}},Component:O(p.Component),default:j,PureComponent:O(p.PureComponent),setGlobal:function(e){return h.setAny(e)}}),e.exports=j},function(t,n){t.exports=e},function(e,t,n){"use strict";n.r(t);function r(e){return(r="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_state",Object.create(null)),c(this,"listeners",new Map),c(this,"transactionId",0),c(this,"transactions",new Map)}return function(e,t,n){t&&o(e.prototype,t)}(e,[{key:"addListener",value:function(e,t){this.listeners.has(e)?this.listeners.get(e).add(t):this.listeners.set(e,new Set([t]))}},{key:"beginTransaction",value:function(){return this.transactionId++,this.transactions.set(this.transactionId,{components:new Set,state:new Map}),this.transactionId}},{key:"commit",value:function(e){var t=this.transactions.get(e),n=!0,r=!1,o=void 0;try{for(var c,i=t.state.entries()[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var u=a(c.value,2),l=u[0],s=u[1];this._state[l]=s}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}var f=!0,d=!1,p=void 0;try{for(var h,b=t.components[Symbol.iterator]();!(f=(h=b.next()).done);f=!0){var y=h.value;y.updater.enqueueForceUpdate(y,null,"forceUpdate")}}catch(e){d=!0,p=e}finally{try{f||null==b.return||b.return()}finally{if(d)throw p}}this.transactions.delete(e)}},{key:"removeListeners",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=this.listeners.values()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var c=a.value;c.has(e)&&c.delete(e)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"set",value:function(e,t,n){var r=this.transactions.get(n);r.state.set(e,t);var a=this.listeners.get(e);if(a){var o=!0,c=!1,i=void 0;try{for(var u,l=a[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value;r.components.add(s)}}catch(e){c=!0,i=e}finally{try{o||null==l.return||l.return()}finally{if(c)throw i}}}return n}},{key:"setAny",value:function(e){if(null!==e){if(e instanceof Promise)return this.setPromise(e);if("function"==typeof e)return this.setFunction(e);if("object"===r(e))return this.setObject(e);throw new Error("Global state must be a function, null, object, or Promise.")}}},{key:"setFunction",value:function(e){return this.setAny(e(this._state))}},{key:"setObject",value:function(e){for(var t=this.beginTransaction(),n=Object.entries(e),r=0;r<n.length;r++){var o=a(n[r],2),c=o[0],i=o[1];this.set(c,i,t)}this.commit(t)}},{key:"setPromise",value:function(e){var t=this;return e.then(function(e){return t.setAny(e)})}},{key:"state",value:function(e){var t=this;return function(e,t){return Object.keys(e).reduce(function(n,r){return Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:function(){return t(r),e[r]}}),n},Object.create(null))}(this._state,function(n){t.addListener(n,e)})}}]),e}();t.default=new u}])},"object"==i(t)&&"object"==i(e)?e.exports=c(n(11)):(a=[n(11)],void 0===(o="function"===typeof(r=c)?r.apply(t,a):r)||(e.exports=o))}).call(this,n(19)(e))},,,,,,,,,,,,,,function(e,t,n){e.exports=n(38)},,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(12),c=n.n(o),i=n(2),u=n(3),l=n(5),s=n(4),f=n(6),d=n(0),p=n.n(d),h=(n(22),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"card add-card"},p.a.createElement("button",{children:"+",className:"add-card-button",onClick:this.global.addCard,title:"Add a new card."}))}}]),t}(p.a.PureComponent)),b=(n(24),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){n.props.onSelect({multiverseid:n.props.multiverseid,name:n.props.name,set:n.props.set})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"search-result",onClick:this.handleClick,title:this.props.name},"(",this.props.set,") ",this.props.name)}}]),t}(a.a.PureComponent)),y=(n(26),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).state={value:n.props.name},n.handleChange=function(e){n.setState({value:e.target.value},function(){""!==n.state.value&&n.global.searchCard(n.value)})},n.handleRef=function(e){n.props.onRef(e)},n.handleResultSelect=function(e){n.setState({value:e.name},function(){n.props.onResult(e)})},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"search"},p.a.createElement("input",{onChange:this.handleChange,placeholder:"Card Name",ref:this.handleRef,type:"text",value:this.state.value}),this.results)}},{key:"results",get:function(){var e=this;if(!this.state.value||!Object.prototype.hasOwnProperty.call(this.global.searchedCards,this.value))return null;var t=this.global.searchedCards[this.value];return Array.isArray(t)?t.map(function(t){return p.a.createElement(b,Object.assign({key:t.multiverseid,onSelect:e.handleResultSelect},t))}):p.a.createElement("div",{children:t,className:"search-error"})}},{key:"value",get:function(){return this.state.value.toLowerCase()}}]),t}(p.a.PureComponent)),m=(n(28),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(a)))).searchRef=null,n.handleAdd=function(){n.global.addCard({multiverseid:n.props.multiverseid,name:n.props.name,set:n.props.set})},n.handleMouseEnter=function(){n.searchRef&&n.searchRef.focus()},n.handleSearchRef=function(e){n.searchRef=e,e&&e.focus()},n.handleSearchResult=function(e){n.global.updateCard(n.props.id,e)},n.handleSubtract=function(){n.global.removeCard(n.props.id)},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"card",onMouseEnter:this.handleMouseEnter,style:this.cardStyle},this.image,p.a.createElement("span",{children:"+",className:"card-add",onClick:this.handleAdd,title:"Copy this card."}),p.a.createElement(y,{name:this.props.name||"",onRef:this.handleSearchRef,onResult:this.handleSearchResult}),p.a.createElement("span",{children:"-",className:"card-subtract",onClick:this.handleSubtract,title:"Remove this card."}))}},{key:"image",get:function(){return this.props.multiverseid?p.a.createElement("img",{alt:this.props.name,className:"card-image",height:"100%",src:"https://i.mtgeni.us/"+this.props.multiverseid+".png",width:"100%"}):null}}]),t}(p.a.PureComponent)),v=(n(30),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"cards"},this.cards,p.a.createElement(h,null))}},{key:"cards",get:function(){return this.global.cards.map(function(e){return p.a.createElement(m,Object.assign({key:e.id},e))})}}]),t}(p.a.PureComponent)),O=(n(32),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.global.cards;return e.length%9===0?null:p.a.createElement("div",{className:"counter"},"Add"," ",p.a.createElement("strong",{children:9-e.length%9})," ","more.")}}]),t}(p.a.PureComponent)),j=(n(34),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",null,a.a.createElement("h1",null,"Magic: The Gathering Card Proxies"),a.a.createElement(O,null)),a.a.createElement("main",null,a.a.createElement(v,null)))}}]),t}(a.a.PureComponent)),g=n(9),w=n(13),C=n(7);Object(d.setGlobal)({cards:[],searchedCards:Object.create(null)});var P=Object.create(null);Object(d.addReducer)("addCard",function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,n=Date.now(),r=function(e){return e.id===n};-1!==e.cards.findIndex(r);)n++;return Object(C.a)({},e,{cards:Object(w.a)(e.cards).concat([Object(C.a)({id:n},t)])})}),Object(d.addReducer)("removeCard",function(e,t){var n=e.cards.findIndex(function(e){return e.id===t});if(-1===n)throw new Error("Card ID ".concat(t," cannot be found."));return Object(C.a)({},e,{cards:e.cards.slice(0,n).concat(e.cards.slice(n+1,e.cards.length+1))})}),Object(d.addReducer)("searchCard",function(e,t){return Object.prototype.hasOwnProperty.call(e.searchedCards,t)?null:fetch("https://api.mtgeni.us/mtg.json?q="+encodeURIComponent(t)).then(function(e){return e.json()}).catch(function(e){return e.message}).then(function(n){return Object(C.a)({},e,{searchedCards:Object(C.a)({},e.searchedCards,Object(g.a)({},t,n))})})}),Object(d.addReducer)("updateCard",function(e,t,n){var r=e.cards.findIndex(function(e){return e.id===t});if(-1===r)throw new Error("Card ID ".concat(t," cannot be found."));return Object(C.a)({},e,{cards:e.cards.slice(0,r).concat([Object(C.a)({id:t},n)]).concat(e.cards.slice(r+1,e.cards.length+1))})});n(36);c.a.render(a.a.createElement(j,null),document.getElementById("root"))}],[[14,2,1]]]);
//# sourceMappingURL=main.5610258c.chunk.js.map